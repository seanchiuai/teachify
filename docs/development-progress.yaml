# LessonPlay Development Progress Tracker
# This file tracks which phase of development is currently active

current_phase:
  phase: 0
  name: "Planning & Reiterating"
  description: "Review PRD, refine requirements, plan architecture and implementation approach"
  started: "2025-01-29"
  status: "in-progress"  # not-started | in-progress | complete
  completion_criteria:
    - "Next.js 14 + Convex + Tailwind + shadcn/ui project scaffolded and running"
    - "Convex schema defined for games, players, answers tables (with gameHtml field)"
    - "File upload (PDF, PPTX, DOCX) and text paste working"
    - "Learning objective input + 6-type objective selector working"
    - "US-001 and US-002 acceptance criteria met"

# Phase History
completed_phases: []

# All Available Phases
phases:
  1:
    name: "Project Setup & Upload"
    description: "Initialize project, define schema, build upload and objective input UI"
    key_deliverables:
      - "Working Next.js + Convex dev environment"
      - "Convex schema for games, players, answers (with gameHtml field)"
      - "Homepage with file upload zone, text input, objective input, type selector"

  2:
    name: "AI Game Generation (Two-Step Pipeline)"
    description: "Integrate Gemini API, generate structured questions, then generate self-contained HTML game"
    key_deliverables:
      - "Gemini API integration via Convex action"
      - "Step 1: Prompt that produces pedagogically-grounded questions (structured JSON)"
      - "Step 2: Prompt that produces self-contained HTML game (inline CSS/JS, postMessage protocol)"
      - "HTML validation (postMessage present, no external URLs)"
      - "Game creation with 6-char code, stored questions + gameHtml"

  3:
    name: "Real-time Game Engine + Iframe Rendering"
    description: "Build game state machine, iframe sandbox, MessageChannel communication, host controls, student join flow"
    key_deliverables:
      - "Game state machine: lobby → playing → question → results → complete"
      - "GameIframe component with sandbox='allow-scripts' and MessageChannel"
      - "Parent-iframe communication protocol (INIT_PORT, START_GAME, ANSWER_SUBMITTED, etc.)"
      - "Host view with game code, player list, controls"
      - "Student join + play flow with real-time sync"
      - "Authoritative timer in parent, answer validation via Convex"

  4:
    name: "Leaderboard & Analytics"
    description: "Build leaderboard, feedback overlays, results analytics (all in parent app, outside iframe)"
    key_deliverables:
      - "Leaderboard between questions and at game end"
      - "Feedback overlay in parent (correct/wrong + explanation)"
      - "Per-question analytics and comprehension gap display"

  5:
    name: "Polish & Demo Prep"
    description: "End-to-end testing, performance, edge cases, iframe error handling, demo readiness"
    key_deliverables:
      - "Full flow working under 60 seconds"
      - "5+ simultaneous players tested"
      - "Iframe error handling (retry/regenerate option)"
      - "Mobile-responsive student view (iframe + parent wrapper)"
      - "Demo-ready with sample content"
